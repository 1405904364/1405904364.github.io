<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"/><meta name="theme-color" content="#222"/><meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"/><meta name="renderer" content="webkit"/><link rel="icon" type="image/ico" sizes="32x32" href="/assets/favicon.ico"/><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"/><link rel="alternate" href="/rss.xml" title="Live My Life" type="application/rss+xml"><link rel="alternate" href="/atom.xml" title="Live My Life" type="application/atom+xml"><link rel="alternate" type="application/json" title="Live My Life" href="http://1405904364.github.io/feed.json"/><link rel="preconnect" href="https://lf9-cdn-tos.bytecdntp.com"/><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"/><link rel="dns-prefetch" href="https://unpkg.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.3.3"><script src="https://cdn.staticfile.org/vue/3.2.45/vue.global.prod.js"></script><meta name="keywords" content="Mysql"/><link rel="canonical" href="http://1405904364.github.io/2024/02/18/%E5%90%8E%E7%AB%AF/Mysql/20.%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95/"><title>索引</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">索引</h1><div class="meta"><span class="item" title="创建时间：2024-02-18 16:13:45"><span class="icon"><i class="ic i-calendar"></i></span><span class="text">发表于</span><time itemprop="dateCreated datePublished" datetime="2024-02-18T16:13:45+08:00">2024-02-18</time></span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i></span><span class="text">本文字数</span><span>9.4k</span><span class="text">字</span></span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i></span><span class="text">阅读时长</span><span>9 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span><span class="line"></span><span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">testName</a></li></ul><ul class="right" id="rightNav"><li class="item theme" @click="changeThemeByBtn"><i class="ic" :class="{'i-sun': !themeStatus,'i-moon': themeStatus}"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div class="pjax" id="imgs"><ul><li class="item" data-background-image="https://images.pexels.com/photos/16022234/pexels-photo-16022234.jpeg"></li><li class="item" data-background-image="https://i.imgtg.com/2023/03/09/YS6XY.jpg"></li><li class="item" data-background-image="https://i.imgtg.com/2023/03/09/YSIlc.jpg"></li><li class="item" data-background-image="https://i.imgtg.com/2023/03/09/YQSYM.jpg"></li><li class="item" data-background-image="https://i.imgtg.com/2023/03/09/Y0kTl.jpg"></li><li class="item" data-background-image="https://i.imgtg.com/2023/03/09/Y0hOs.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg></div><main><div class="inner"><div class="pjax" id="main"><div class="article wrap"><div class="breadcrumb" itemListElement itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i><span><a href="/">首页</a></span></div><article class="post block" itemscope="itemscope" itemtype="http://schema.org/Article" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://1405904364.github.io/2024/02/18/%E5%90%8E%E7%AB%AF/Mysql/20.%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95/"/><span hidden="hidden" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="image" content="/assets/avatar.jpg"/><meta itemprop="name" content="一念成余"/><meta itemprop="description" content="一念成余, 个人学习使用"/></span><span hidden="hidden" itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Live My Life"/></span><div class="body md" itemprop="articleBody"><h1 id="索引"><a class="markdownIt-Anchor" href="#索引">#</a> 索引</h1>
<p>什么是索引？<br>
索引在数据库表的字段上添加的，是为了提高检索（查询）效率存在的一种机制</p>
<pre><code>一张表的一个字段可以添加一个索引，多个字段可以联合起来添加索引

索引相当于一本书的目录，是为了缩小扫描范围而存在的一种机制
</code></pre>
<p>举例：<br>
查字典：<br>
1. 一页一页查找，直到找到为止。这种查找属于全表扫描，效率低</p>
<pre><code>    3. 通过目录（索引），去定位一个大概的位置，然后直接定位到该位置，做局域性扫描，缩小扫描的范围，快速的查找。这种方式属于索引检索，效率高

Mysql中查询的两种方式：
    1. 全表扫描
    2. 根据索引检索
</code></pre>
<p>注意：<br>
在 Mysql 数据库当中索引也是需要排序的，并且这个索引的排序和 TreeSet 数据结构相同。TreeSet（TreeMap）底层是一个自平衡的二叉树！<br>
在 Mysq 中索引是一个 B-Tree 数据结构。</p>
<pre><code>遵循左小右大原则存放，采用中序遍历方式遍历取数据
</code></pre>
<p><strong>在任何数据库当中，主键都会自动添加索引对象</strong></p>
<p><strong>在任何数据库当中，任何一张表的任何一条记录在硬盘存储上都有一个硬盘的物理存储编号</strong></p>
<p><strong>在 Mysql 中，一个字段上如果右 unique 约束的话，也会自动创建索引对象</strong></p>
<p><strong>在 Mysql 当中，索引是一个单独的对象，不同的存储引擎以不同形式存在。</strong><br>
1. 在 MyISAM 存储引擎中，索引存储在一个.MYI 文件中<br>
 2. 在 InnoDB 存储引擎当中，索引存储在一个叫 tablespace 当中。<br>
3. 在 Memory 存储引擎当中，被存储在内存当中<br>
不管索引存储在哪里，索引在 Mysql 中都是一个树的形式存在。（自平衡二叉树：B-Tree）</p>
<h2 id="在mysql中主键以及unique字段上都会自动添加索引"><a class="markdownIt-Anchor" href="#在mysql中主键以及unique字段上都会自动添加索引">#</a> 在 Mysql 中，主键以及 unique 字段上都会自动添加索引</h2>
<p>什么条件下，需要考虑给字段添加索引？<br>
1. 数据量庞大（需要测试）<br>
2. 该字段经常出现在 where 查询条件中<br>
 3. 该字段很少的 DML 操作（因为 DML 之后，索引经常需要重新排序）<br>
注意：<br>
建议不要随意添加索引，因为索引也是需要维护的，太多反而会降低系统性能<br>
建议通过主键查询，建议通过 unique 约束字段进行查询，效率是比较高的</p>
<h2 id="创建和删除索引"><a class="markdownIt-Anchor" href="#创建和删除索引">#</a> 创建和删除索引</h2>
<h3 id="创建索引"><a class="markdownIt-Anchor" href="#创建索引">#</a> 创建索引</h3>
<pre><code>create index 索引名 on 表名(要添加索引的字段名);

create index emp_ename_index on emp(ename);
</code></pre>
<h3 id="删除索引"><a class="markdownIt-Anchor" href="#删除索引">#</a> 删除索引</h3>
<pre><code>drop index 索引名 on 表名;

drop index emp_ename_index on emp;


在Mysql中查看一个SQL语句是否使用了索引进行检索
explain select * from t_user where name = 'zhangsan6';
</code></pre>
<p>举例：<br>
## 查看 sql 语句执行详情<br>
 mysql&gt; explain select * from t_user where name = ‘zhangsan6’;<br>
±—±------------±-------±-----------±-----±--------------±-----±--------±-----±-----±---------±------------+<br>
| id | select_type | table  | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra       |<br>
±—±------------±-------±-----------±-----±--------------±-----±--------±-----±-----±---------±------------+<br>
|  1 | SIMPLE      | t_user | NULL       | ALL  | NULL          | NULL | NULL    | NULL |   12 |    10.00 | Using where |<br>
±—±------------±-------±-----------±-----±--------------±-----±--------±-----±-----±---------±------------+<br>
1 row in set, 1 warning (0.00 sec)</p>
<pre><code>## 为name字段创建索引
create index user_name_index on t_user(name);

## 在索引创建后，重新执行sql语句，查看sql执行情况
mysql&gt; explain select * from t_user where name = 'zhangsan6';
+----+-------------+--------+------------+------+-----------------+-----------------+---------+-------+------+----------+-------------+
| id | select_type | table  | partitions | type | possible_keys   | key             | key_len | ref   | rows | filtered | Extra       |
+----+-------------+--------+------------+------+-----------------+-----------------+---------+-------+------+----------+-------------+
|  1 | SIMPLE      | t_user | NULL       | ref  | user_name_index | user_name_index | 1023    | const |    1 |   100.00 | Using index |
+----+-------------+--------+------------+------+-----------------+-----------------+---------+-------+------+----------+-------------+
1 row in set, 1 warning (0.00 sec)
</code></pre>
<p>性能分析：</p>
<blockquote>
<p>1）、id 列数字越大越先执行，如果说数字一样大，那么就从上往下依次执行，id 列为 null 的就表是这是一个结果集，不需要使用它来进行查询。</p>
<p>2）、select_type 列常见的有：<br>
A：simple：表示不需要 union 操作或者不包含子查询的简单 select 查询。有连接查询时，外层的查询为 simple，且只有一个<br>
 B：primary：一个需要 union 操作或者含有子查询的 select，位于最外层的单位查询的 select_type 即为 primary。且只有一个<br>
 C：union：union 连接的两个 select 查询，第一个查询是 dervied 派生表，除了第一个表外，第二个以后的表 select_type 都是 union<br>
D：dependent union：与 union 一样，出现在 union 或 union all 语句中，但是这个查询要受到外部查询的影响<br>
 E：union result：包含 union 的结果集，在 union 和 union all 语句中，因为它不需要参与查询，所以 id 字段为 null<br>
F：subquery：除了 from 字句中包含的子查询外，其他地方出现的子查询都可能是 subquery<br>
G：dependent subquery：与 dependent union 类似，表示这个 subquery 的查询要受到外部表查询的影响<br>
 H：derived：from 字句中出现的子查询，也叫做派生表，其他数据库中可能叫做内联视图或嵌套 select</p>
<p>3）、table<br>
 显示的查询表名，如果查询使用了别名，那么这里显示的是别名，如果不涉及对数据表的操作，那么这显示为 null，如果显示为尖括号括起来的<derived N>就表示这个是临时表，&gt; 后边的 N 就是执行计划中的 id，表示结果来自于这个查询产生。如果是尖括号括起来的 &lt;union M,N&gt;，与<derived N>类似，也是一个临时表，表示这个结果来自于 union 查询的 id 为 M,&gt; N 的结果集。</p>
<p>4）、type<br>
 依次从好到差：system，const，eq_ref，ref，fulltext，ref_or_null，unique_subquery，index_subquery，range，index_merge，index，ALL，除了 all 之外，其他的 type 都 &gt; 可以使用到索引，除了 index_merge 之外，其他的 type 只可以用到一个索引<br>
 A：system：表中只有一行数据或者是空表，且只能用于 myisam 和 memory 表。如果是 Innodb 引擎表，type 列在这个情况通常都是 all 或者 index<br>
B：const：使用唯一索引或者主键，返回记录一定是 1 行记录的等值 where 条件时，通常 type 是 const。其他数据库也叫做唯一索引扫描<br>
 C：eq_ref：出现在要连接过个表的查询计划中，驱动表只返回一行数据，且这行数据是第二个表的主键或者唯一索引，且必须为 not null，唯一索引和主键是多列时，只有所有的 &gt; 列都用作比较时才会出现 eq_ref<br>
D：ref：不像 eq_ref 那样要求连接顺序，也没有主键和唯一索引的要求，只要使用相等条件检索时就可能出现，常见与辅助索引的等值查找。或者多列主键、唯一索引中，使用第一 &gt; 个列之外的列作为等值查找也会出现，总之，返回数据不唯一的等值查找就可能出现。<br>
E：fulltext：全文索引检索，要注意，全文索引的优先级很高，若全文索引和普通索引同时存在时，mysql 不管代价，优先选择使用全文索引<br>
 F：ref_or_null：与 ref 方法类似，只是增加了 null 值的比较。实际用的不多。<br>
G：unique_subquery：用于 where 中的 in 形式子查询，子查询返回不重复值唯一值<br>
 H：index_subquery：用于 in 形式子查询使用到了辅助索引或者 in 常数列表，子查询可能返回重复值，可以使用索引将子查询去重。<br>
I：range：索引范围扫描，常见于使用 &gt;,&lt;,is null,between ,in ,like 等运算符的查询中。<br>
J：index_merge：表示查询使用了两个以上的索引，最后取交集或者并集，常见 and ，or 的条件使用了不同的索引，官方排序这个在 ref_or_null 之后，但是实际上由于要读取所个 &gt; 索引，性能可能大部分时间都不如 range<br>
K：index：索引全表扫描，把索引从头到尾扫一遍，常见于使用索引列就可以处理不需要读取数据文件的查询、可以使用索引排序或者分组的查询。<br>
L：all：这个就是全表扫描数据文件，然后再在 server 层进行过滤返回符合要求的记录。</p>
<p>5）、possible_keys<br>
 查询可能使用到的索引都会在这里列出来</p>
<p>6）、key<br>
 查询真正使用到的索引，select_type 为 index_merge 时，这里可能出现两个以上的索引，其他的 select_type 这里只会出现一个。</p>
<p>7）、key_len<br>
 用于处理查询的索引长度，如果是单列索引，那就整个索引长度算进去，如果是多列索引，那么查询不一定都能使用到所有的列，具体使用到了多少个列的索引，这里就会计算进 &gt; 去，没有使用到的列，这里不会计算进去。留意下这个列的值，算一下你的多列索引总长度就知道有没有使用到所有的列了。要注意，mysql 的 ICP 特性使用到的索引不会计入其中。&gt; 另外，key_len 只计算 where 条件用到的索引长度，而排序和分组就算用到了索引，也不会计算到 key_len 中。</p>
<p>8）、ref<br>
 如果是使用的常数等值查询，这里会显示 const，如果是连接查询，被驱动表的执行计划这里会显示驱动表的关联字段，如果是条件使用了表达式或者函数，或者条件列发生了内部 &gt; 隐式转换，这里可能显示为 func</p>
<p>9）、rows<br>
 这里是执行计划中估算的扫描行数，不是精确值</p>
<p>10）、extra<br>
 这个列可以显示的信息非常多，有几十种，常用的有<br>
 A：distinct：在 select 部分使用了 distinc 关键字<br>
 B：no tables used：不带 from 字句的查询或者 From dual 查询<br>
 C：使用 not in () 形式子查询或 not exists 运算符的连接查询，这种叫做反连接。即，一般连接查询是先查询内表，再查询外表，反连接就是先查询外表，再查询内表。<br>
D：using filesort：排序时无法使用到索引时，就会出现这个。常见于 order by 和 group by 语句中<br>
 E：using index：查询时不需要回表查询，直接通过索引就可以获取查询的数据。<br>
F：using join buffer（block nested loop），using join buffer（batched key accss）：5.6.x 之后的版本优化关联查询的 BNL，BKA 特性。主要是减少内表的循环数量以及比 &gt; 较顺序地扫描查询。<br>
G：using sort_union，using_union，using intersect，using sort_intersection：<br>
using intersect：表示使用 and 的各个索引的条件时，该信息表示是从处理结果获取交集<br>
 using union：表示使用 or 连接各个使用索引的条件时，该信息表示从处理结果获取并集<br>
 using sort_union 和 using sort_intersection：与前面两个对应的类似，只是他们是出现在用 and 和 or 查询信息量大时，先查询主键，然后进行排序合并后，才能读取记录并返 &gt; 回。<br>
H：using temporary：表示使用了临时表存储中间结果。临时表可以是内存临时表和磁盘临时表，执行计划中看不出来，需要查看 status 变量，used_tmp_table，&gt; used_tmp_disk_table 才能看出来。<br>
I：using where：表示存储引擎返回的记录并不是所有的都满足查询条件，需要在 server 层进行过滤。查询条件中分为限制条件和检查条件，5.6 之前，存储引擎只能根据限制条件 &gt; 扫描数据并返回，然后 server 层根据检查条件进行过滤再返回真正符合查询的数据。5.6.x 之后支持 ICP 特性，可以把检查条件也下推到存储引擎层，不符合检查条件和限制条件的数 &gt; 据，直接不读取，这样就大大减少了存储引擎扫描的记录数量。extra 列显示 using index condition<br>
J：firstmatch (tb_name)：5.6.x 开始引入的优化子查询的新特性之一，常见于 where 字句含有 in () 类型的子查询。如果内表的数据量比较大，就可能出现这个<br>
 K：loosescan (m…n)：5.6.x 之后引入的优化子查询的新特性之一，在 in () 类型的子查询中，子查询返回的可能有重复记录时，就可能出现这个</p>
<p>除了这些之外，还有很多查询数据字典库，执行计划过程中就发现不可能存在结果的一些提示信息</p>
<p>11）、filtered<br>
 使用 explain extended 时会出现这个列，5.7 之后的版本默认就有这个字段，不需要使用 explain extended 了。这个字段表示存储引擎返回的数据在 server 层过滤后，剩下多少满足 &gt; 查询的记录数量的比例，注意是百分比，不是具体记录数。</p>
</blockquote>
<h3 id="性能分析2-explain-analyze"><a class="markdownIt-Anchor" href="#性能分析2-explain-analyze">#</a> 性能分析 2 Explain Analyze</h3>
<pre><code class="language-Sql">
-- auto-generated definition
create table eps_working_rec
(
    RecNo      int auto_increment comment '记录编号'
        primary key,
    ShiftNo    varchar(20)    null,
    WorkDate   datetime       null comment '生产日期',
    LineFK     varchar(50)    null comment '包装线编号',
    EqutFK     varchar(20)    not null comment '设备编号',
    Rec_Type   int            not null comment '记录类型',
    StopReason varchar(50)    null comment '停机类型：A—交接班，B—工艺清洗，C—更换品种，D—外部原因，E—故障停机',
    BeginTime  datetime       null comment '开始时间',
    EndTime    datetime       null comment '结束时间',
    Time_Cum   int            null comment '时长',
    BBQty      decimal(18, 4) null comment '清酒量(单位：KL)',
    FinalBot   int            null comment '成品瓶数（单位：瓶）',
    IsValid    tinyint        null comment '数据是否有效',
    DataSrouce varchar(10)    null comment '数据来源：数据采集Automatic，人工维护Manual',
    CreateBy   varchar(20)    null comment '创建者（默认值：数据采集）',
    CreateOn   datetime       null comment '创建时间（记录插入时的系统时间）',
    UpdateBy   varchar(20)    null comment '修改人',
    UpdateOn   datetime       null comment '修改时间',
    StopClass  varchar(50)    null,
    Qty_Bottle int            null,
    Qty_Box    int            null,
    Qty_Stack  int            null,
    IsFillStop tinyint        null,
    Classes    varchar(20)    null,
    StopNature varchar(50)    null
)
    charset = utf8mb3;

create index PK_EPS_VBT
    on eps_working_rec (IsValid, BeginTime, Time_Cum);

create index PK_LineFK_EqutFk
    on eps_working_rec (LineFK, EqutFK);

create index dta_index_EPS_Working_Rec
    on eps_working_rec (EqutFK, StopReason, BeginTime, EndTime, Time_Cum, Rec_Type, RecNo);


# 执行的sql语句
explain analyze
select sum(Time_Cum)
from eps_working_rec
where Rec_Type = 1
  and EqutFK = 'EQPK21004'

# 执行sql返回的结果
-&gt; Aggregate: sum(eps_working_rec.Time_Cum)  (cost=3496.35 rows=1) (actual time=15.869..15.869 rows=1 loops=1)
    -&gt; Filter: (eps_working_rec.Rec_Type = 1)  (cost=2762.65 rows=7337) (actual time=0.054..14.458 rows=20016 loops=1)
        -&gt; Covering index lookup on eps_working_rec using dta_index_EPS_Working_Rec (EqutFK='EQPK21004')  (cost=2762.65 rows=73370) (actual time=0.053..12.303 rows=40293 loops=1)

</code></pre>
<blockquote>
<p>(cost=3496.35 rows=1) cost 预计执行时间、rows 预计返回记录条数</p>
<p>(cost=2762.65 rows=7337) (actual time=0.054…14.458 rows=20016 loops=1)<br>
 实际执行结果情况：<br>
time 分为两部分: 0.054 返回第一条记录的时间  14.458 返回所有记录耗时<br>
 row 返回准确的记录数<br>
 loops 是当前过滤迭代器所执行的循环的数量。</p>
</blockquote>
<div class="tags"><a href="/tags/Mysql/" rel="tag"><i class="ic i-tag"></i>Mysql</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i></span><span class="text">更新于</span><time title="修改时间：2023-10-27 11:43:43" itemprop="dateModified" datetime="2023-10-27T11:43:43+08:00">2023-10-27</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i>赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/assets/wechatpay.png" alt="一念成余 微信支付"/><p>微信支付</p></div><div><img data-src="/assets/alipay.png" alt="一念成余 支付宝"/><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者：</strong>一念成余<i class="ic i-at"><em>@</em></i>Live My Life</li><li class="link"><strong>本文链接：</strong><a href="http://1405904364.github.io/2024/02/18/%E5%90%8E%E7%AB%AF/Mysql/20.%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95/" title="索引">http://1405904364.github.io/2024/02/18/后端/Mysql/20.索引/索引/</a></li><li class="license"><strong>版权声明：</strong>本站所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2024/02/18/%E5%90%8E%E7%AB%AF/Mysql/20.%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88/" rel="prev" itemprop="url" data-background-image="https:&#x2F;&#x2F;images.pexels.com&#x2F;photos&#x2F;12635428&#x2F;pexels-photo-12635428.jpeg" title="索引失效"><span class="type">上一篇</span><h3>索引失效</h3></a></div><div class="item right"><a href="/2024/02/18/%E5%90%8E%E7%AB%AF/Mysql/21.%E8%A7%86%E5%9B%BE/%E8%A7%86%E5%9B%BE/" rel="next" itemprop="url" data-background-image="https:&#x2F;&#x2F;i.imgtg.com&#x2F;2023&#x2F;03&#x2F;09&#x2F;Y0hOs.jpg" title="视图"><span class="type">下一篇</span><h3>视图</h3></a></div></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-number">1.</span> <span class="toc-text"> 索引</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8mysql%E4%B8%AD%E4%B8%BB%E9%94%AE%E4%BB%A5%E5%8F%8Aunique%E5%AD%97%E6%AE%B5%E4%B8%8A%E9%83%BD%E4%BC%9A%E8%87%AA%E5%8A%A8%E6%B7%BB%E5%8A%A0%E7%B4%A2%E5%BC%95"><span class="toc-number">1.1.</span> <span class="toc-text"> 在 Mysql 中，主键以及 unique 字段上都会自动添加索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%92%8C%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="toc-number">1.2.</span> <span class="toc-text"> 创建和删除索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 创建索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="toc-number">1.2.2.</span> <span class="toc-text"> 删除索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%902-explain-analyze"><span class="toc-number">1.2.3.</span> <span class="toc-text"> 性能分析 2 Explain Analyze</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="一念成余" data-src="/assets/avatar.jpg"/><p class="name" itemprop="name">一念成余</p><div class="description" itemprop="description">个人学习使用</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">97</span><span class="name">文章</span></a></div><div class="item tags"><a href="/tags/"><span class="count">15</span><span class="name">标签</span></a></div></nav><div class="social"><a href="https://github.com/name" class="item github" rel="noopener" title="https:&#x2F;&#x2F;github.com&#x2F;name" target="_blank"><i class="ic i-github"></i></a></div><div class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-user"></i>关于</a><ul class="submenu"><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于本站</a></li><li class="item"><a href="/admiration/" rel="section"><i class="ic i-coffee"></i>赞赏博主</a></li></ul></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友链</a></li></div></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2024/02/18/%E5%90%8E%E7%AB%AF/Mysql/21.%E8%A7%86%E5%9B%BE/%E8%A7%86%E5%9B%BE/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2024/02/18/%E5%90%8E%E7%AB%AF/Mysql/20.%E7%B4%A2%E5%BC%95/%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"></div><span><a href="/2024/02/18/%E5%90%8E%E7%AB%AF/Mysql/13.%E5%88%86%E9%A1%B5/limit/">Mysql中limit</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2024/02/18/%E5%89%8D%E7%AB%AF/%E4%B8%89%E4%BB%B6%E5%A5%97/HTML/2.%E5%9F%BA%E7%A1%80/">未命名</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2024/02/18/%E5%90%8E%E7%AB%AF/Mysql/11.distinct%E5%8E%BB%E9%87%8D/distinct/">Mysql中Distinct去重</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2024/02/18/%E5%90%8E%E7%AB%AF/Mysql/12.%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2/4.%E5%A4%9A%E8%A1%A8%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2/">Mysql多表连接查询</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2024/02/18/%E5%90%8E%E7%AB%AF/C#/2.%E7%8E%AF%E5%A2%83/">未命名</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2024/02/18/%E5%90%8E%E7%AB%AF/Mysql/12.%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2/2.%E5%86%85%E8%BF%9E%E6%8E%A5/">Mysql内连接</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2024/02/18/%E5%89%8D%E7%AB%AF/%E9%A1%B9%E7%9B%AE/%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/">npm更换镜像</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2024/02/18/%E5%89%8D%E7%AB%AF/VUE/2.Vue%E5%9F%BA%E7%A1%80/3.%E7%BB%84%E4%BB%B6%E5%9F%BA%E7%A1%80/">未命名</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2024/02/18/%E6%9C%8D%E5%8A%A1%E5%99%A8/1.top%E5%91%BD%E4%BB%A4/">top命令</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2024/02/18/%E5%90%8E%E7%AB%AF/Mysql/25.%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/">Mysql存储过程</a></span></li></ul></div><div class="rpost pjax"><h2>最新评论</h2><ul class="leancloud-recent-comment" id="new-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2022 -<span itemprop="copyrightYear">2024</span><span class="with-love"><i class="ic i-sakura rotate"></i></span><span class="author" itemprop="copyrightHolder">一念成余 @ testName</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i></span><span title="站点总字数">184k 字</span><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="ic i-coffee"></i></span><span title="站点阅读时长">2:47</span></div><div class="powered-by">基于 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & Theme.<a href="https://github.com/theme-shoka-x/hexo-theme-shokaX/" rel="noopener" target="_blank">ShokaX</a></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL = {
        path: `2024/02/18/后端/Mysql/20.索引/索引/`,
        favicon: {
        show: `（●´3｀●）やれやれだぜ`,
        hide: `(´Д｀)大変だ！`
    },
    search: {
        placeholder: "文章搜索",
        empty: "关于 「 ${query} 」，什么也没搜到",
        stats: "${time} ms 内找到 ${hits} 条结果"
    },
    valine: true,
    chart: false,
    copy_tex: false,
    katex: false,
    mermaid: false,
    audio: ``,
    fancybox: true,
    nocopy: false,
    outime: true,
    template: `&lt;div class=&quot;note warning&quot;&gt;&lt;p&gt;&lt;span class=&quot;label warning&quot;&gt;文章时效性提示&lt;/span&gt;&lt;br&gt;这是一篇发布于 {{publish}} 天前，最后一次更新在 {{updated}} 天前的文章，部分信息可能已经发生改变，请注意甄别。&lt;/p&gt;&lt;/div&gt;`,
    quiz: {
        choice: `单选题`,
        multiple: `多选题`,
        true_false: `判断题`,
        essay: `问答题`,
        gap_fill: `填空题`,
        mistake: `错题备注`
    },
    ignores: [
        (uri) => uri.includes('#'),
        (uri) => new RegExp(LOCAL.path + '$').test(uri),
            []
    ]
};
</script><script src="https://polyfill.io/v3/polyfill.min.js?features=default,fetch"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/pace/1.0.2/pace.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/algoliasearch/4.12.1/algoliasearch-lite.umd.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/instantsearch.js/4.39.0/instantsearch.production.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/quicklink/2.2.0/quicklink.umd.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/??jquery/3.5.1/jquery.min.js,fancybox/3.5.7/jquery.fancybox.min.js,justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" async></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/KaTeX/0.15.2/contrib/copy-tex.min.js" async></script><script src="/js/app.js?v=0.3.3"></script></body></html>